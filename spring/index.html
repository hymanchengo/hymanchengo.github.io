<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>大纲 | think-build-share</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/vuepress/favicon.ico">
    <script language="javascript" type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/js/MouseClickEffect.js"></script>
    <meta name="description" content="Just playing around">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.4603f7b5.css" as="style"><link rel="preload" href="/assets/js/app.198c1c7f.js" as="script"><link rel="preload" href="/assets/js/3.e89c7bc2.js" as="script"><link rel="preload" href="/assets/js/1.f801d562.js" as="script"><link rel="preload" href="/assets/js/19.1aebbbde.js" as="script"><link rel="prefetch" href="/assets/js/10.9e9a9a99.js"><link rel="prefetch" href="/assets/js/11.3ed6a9a8.js"><link rel="prefetch" href="/assets/js/12.1bec8c85.js"><link rel="prefetch" href="/assets/js/13.265db576.js"><link rel="prefetch" href="/assets/js/14.97e09b0a.js"><link rel="prefetch" href="/assets/js/15.2ec2469c.js"><link rel="prefetch" href="/assets/js/16.788c4eb5.js"><link rel="prefetch" href="/assets/js/17.3ba649a8.js"><link rel="prefetch" href="/assets/js/18.7dd75726.js"><link rel="prefetch" href="/assets/js/20.dd8d4020.js"><link rel="prefetch" href="/assets/js/21.e249a984.js"><link rel="prefetch" href="/assets/js/22.4d68d91d.js"><link rel="prefetch" href="/assets/js/23.4ad45b35.js"><link rel="prefetch" href="/assets/js/24.be0c09ac.js"><link rel="prefetch" href="/assets/js/25.97582c89.js"><link rel="prefetch" href="/assets/js/26.777f93a1.js"><link rel="prefetch" href="/assets/js/27.b16f6d8c.js"><link rel="prefetch" href="/assets/js/28.ea08c8e9.js"><link rel="prefetch" href="/assets/js/29.24d6fb71.js"><link rel="prefetch" href="/assets/js/30.8510435b.js"><link rel="prefetch" href="/assets/js/31.6253aec9.js"><link rel="prefetch" href="/assets/js/32.0dd560a4.js"><link rel="prefetch" href="/assets/js/33.65361602.js"><link rel="prefetch" href="/assets/js/34.f27436cb.js"><link rel="prefetch" href="/assets/js/35.7ac29299.js"><link rel="prefetch" href="/assets/js/36.1925b76e.js"><link rel="prefetch" href="/assets/js/37.66334c26.js"><link rel="prefetch" href="/assets/js/38.ad378120.js"><link rel="prefetch" href="/assets/js/39.b8c80c17.js"><link rel="prefetch" href="/assets/js/4.6d2297c8.js"><link rel="prefetch" href="/assets/js/40.6e9acd1c.js"><link rel="prefetch" href="/assets/js/41.4c0dde9e.js"><link rel="prefetch" href="/assets/js/42.136aac0d.js"><link rel="prefetch" href="/assets/js/43.2ed33d60.js"><link rel="prefetch" href="/assets/js/44.5f0958a7.js"><link rel="prefetch" href="/assets/js/45.d8af4376.js"><link rel="prefetch" href="/assets/js/46.47414fa6.js"><link rel="prefetch" href="/assets/js/47.236a103d.js"><link rel="prefetch" href="/assets/js/48.eb854a20.js"><link rel="prefetch" href="/assets/js/49.d105ebf1.js"><link rel="prefetch" href="/assets/js/5.0bad958f.js"><link rel="prefetch" href="/assets/js/50.81578e80.js"><link rel="prefetch" href="/assets/js/51.50020fb7.js"><link rel="prefetch" href="/assets/js/52.ba1978dc.js"><link rel="prefetch" href="/assets/js/53.14cf8caf.js"><link rel="prefetch" href="/assets/js/54.50dcb08c.js"><link rel="prefetch" href="/assets/js/55.57c793c6.js"><link rel="prefetch" href="/assets/js/56.42aef2b5.js"><link rel="prefetch" href="/assets/js/57.d191e17d.js"><link rel="prefetch" href="/assets/js/58.cf46b1f1.js"><link rel="prefetch" href="/assets/js/59.2b663f38.js"><link rel="prefetch" href="/assets/js/6.fa56699c.js"><link rel="prefetch" href="/assets/js/60.e3407b1e.js"><link rel="prefetch" href="/assets/js/61.8f658a38.js"><link rel="prefetch" href="/assets/js/62.49cc39d7.js"><link rel="prefetch" href="/assets/js/63.312918bd.js"><link rel="prefetch" href="/assets/js/64.ad64e103.js"><link rel="prefetch" href="/assets/js/65.16e8c687.js"><link rel="prefetch" href="/assets/js/66.39969a99.js"><link rel="prefetch" href="/assets/js/67.c6bf4b85.js"><link rel="prefetch" href="/assets/js/68.a9569d5e.js"><link rel="prefetch" href="/assets/js/69.07dee552.js"><link rel="prefetch" href="/assets/js/7.e29bd960.js"><link rel="prefetch" href="/assets/js/70.6eb5c190.js"><link rel="prefetch" href="/assets/js/71.d9eeb169.js"><link rel="prefetch" href="/assets/js/72.4bd38647.js"><link rel="prefetch" href="/assets/js/73.4894419e.js"><link rel="prefetch" href="/assets/js/74.7ca0518b.js"><link rel="prefetch" href="/assets/js/75.992062db.js"><link rel="prefetch" href="/assets/js/76.0d4a6fb8.js"><link rel="prefetch" href="/assets/js/77.0e400fc3.js"><link rel="prefetch" href="/assets/js/78.856242bd.js"><link rel="prefetch" href="/assets/js/79.f33266da.js"><link rel="prefetch" href="/assets/js/8.530ccac1.js"><link rel="prefetch" href="/assets/js/80.c6e7e3b5.js"><link rel="prefetch" href="/assets/js/81.0076c66b.js"><link rel="prefetch" href="/assets/js/82.c3e5e4fb.js"><link rel="prefetch" href="/assets/js/83.fc52047e.js"><link rel="prefetch" href="/assets/js/84.f87af67f.js"><link rel="prefetch" href="/assets/js/85.cf37baf7.js"><link rel="prefetch" href="/assets/js/86.237cd68c.js"><link rel="prefetch" href="/assets/js/87.89e5e27f.js"><link rel="prefetch" href="/assets/js/88.fb79632a.js"><link rel="prefetch" href="/assets/js/9.827f66a6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4603f7b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-9f1e2f90><div data-v-9f1e2f90><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-9f1e2f90 data-v-9f1e2f90><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-58d5ab76 data-v-9f1e2f90 data-v-9f1e2f90><h3 class="title" style="display:none;" data-v-58d5ab76 data-v-58d5ab76>think-build-share</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-58d5ab76 data-v-58d5ab76><input type="password" value="" data-v-58d5ab76> <span data-v-58d5ab76>Konck! Knock!</span> <button data-v-58d5ab76>OK</button></label> <div class="footer" style="display:none;" data-v-58d5ab76 data-v-58d5ab76><span data-v-58d5ab76><i class="iconfont reco-theme" data-v-58d5ab76></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-58d5ab76>vuePress-theme-reco</a></span> <span data-v-58d5ab76><i class="iconfont reco-copyright" data-v-58d5ab76></i> <a data-v-58d5ab76><span data-v-58d5ab76>think-build-share</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-9f1e2f90><header class="navbar" data-v-9f1e2f90><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">think-build-share</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask" data-v-9f1e2f90></div> <aside class="sidebar" data-v-9f1e2f90><div class="personal-info-wrapper" data-v-3eba7259 data-v-9f1e2f90><!----> <h3 class="name" data-v-3eba7259>
    think-build-share
  </h3> <div class="num" data-v-3eba7259><div data-v-3eba7259><h3 data-v-3eba7259>1</h3> <h6 data-v-3eba7259>Article</h6></div> <div data-v-3eba7259><h3 data-v-3eba7259>1</h3> <h6 data-v-3eba7259>Tag</h6></div></div> <hr data-v-3eba7259></div> <!----> <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">首页</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>三省吾身</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>万丈高楼平地起</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Spring</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/spring/" aria-current="page" class="active sidebar-link">大纲</a></li><li><a href="/spring/deepinspring.html" class="sidebar-link">spring 深入</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring Boot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ORM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>字符集</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>团队与实践</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C(++)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>软件设计</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-58d5ab76 data-v-9f1e2f90><h3 class="title" style="display:none;" data-v-58d5ab76 data-v-58d5ab76></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-58d5ab76 data-v-58d5ab76><input type="password" value="" data-v-58d5ab76> <span data-v-58d5ab76>Konck! Knock!</span> <button data-v-58d5ab76>OK</button></label> <div class="footer" style="display:none;" data-v-58d5ab76 data-v-58d5ab76><span data-v-58d5ab76><i class="iconfont reco-theme" data-v-58d5ab76></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-58d5ab76>vuePress-theme-reco</a></span> <span data-v-58d5ab76><i class="iconfont reco-copyright" data-v-58d5ab76></i> <a data-v-58d5ab76><span data-v-58d5ab76>think-build-share</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-9f1e2f90><main class="page"><div class="page-title" style="display:none;"><h1 class="title">大纲</h1> <div data-v-42458482><i class="iconfont reco-account" data-v-42458482><span data-v-42458482>think-build-share</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="大纲"><a href="#大纲" class="header-anchor">#</a> 大纲</h2> <ul><li>Spring Core
<ul><li>Spring IoC容器
<ul><li>容器概述</li> <li>Bean
<ul><li>bean定义
<ul><li>为bean命名</li> <li>实例化Bean</li></ul></li> <li>Bean作用域</li> <li>Bean特性</li> <li>Bean定义继承</li></ul></li> <li>依赖</li> <li>类路径扫描和托管组件</li> <li>容器配置
<ul><li>基于xml的容器配置</li> <li>基于注解的容器配置</li> <li>基于java的容器配置</li></ul></li> <li>容器扩展点</li> <li>BeanFactory</li> <li>ApplicationContext</li> <li>jsr 330标准注解</li> <li>环境抽象</li> <li>LoadTimeWeaver</li></ul></li> <li>Spring AOP</li></ul></li></ul> <h2 id="spring-ioc容器"><a href="#spring-ioc容器" class="header-anchor">#</a> Spring IoC容器</h2> <p>IoC简单说来就是原先对象自己控制依赖的初始化变成依赖注入。这种控制的转变就是IoC。当然IoC是一个设计原则。<a href="/design/IOC.html">之前一篇</a>翻译自wiki的文章可做进一步了解，
Spring IoC就是Spring对IoC容器的实现。Spring IoC容器实现基础包是<code>org.springframework.beans</code>和<code>org.springframework.context</code>。</p> <p><img src="data:image/jpeg;base64,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" alt="spring原理鸟瞰"></p><div style="text-align:center;font-size:14px;color:#C0C0C0;text-decoration:underline;">spring原理鸟瞰引自https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans</div><p></p> <h3 id="容器概述"><a href="#容器概述" class="header-anchor">#</a> 容器概述</h3> <h4 id="_1-配置元数据"><a href="#_1-配置元数据" class="header-anchor">#</a> 1. 配置元数据</h4> <p>配置元数据用于告诉Spring如何实例化、配置和装配应用中的对象。Spring容器本身是和配置元数据编写的格式是解耦的。</p> <ul><li>配置元数据的表现形式
<ul><li>基于xml文件的配置</li> <li>基于java注解的配置（Spring 2.5起）</li> <li>基于java代码的配置（Spring 3.0起）
<ul><li>@Configuration</li> <li>@Bean</li> <li>@Import</li> <li>@DependsOn</li></ul></li></ul></li> <li>配置内容
<ul><li>bean定义
<ul><li>xml中<div class="language-xml extra-class"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li>java中@Configuration注解类中@Bean注解的方法</li> <li>示例 resources\applicationContext.xml</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!--traditional declaration--&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.Grade<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>klass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.KClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>no<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><ul><li><a href="">详细bean定义格式</a></li></ul></li> <li>通常不在容器中配置细粒度的领域对象，它由dao负责。但可以<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-atconfigurable" target="_blank" rel="noopener noreferrer">通过spring与aspectj集成配置不受容器控制创建的对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h4 id="_2-实例化容器"><a href="#_2-实例化容器" class="header-anchor">#</a> 2，实例化容器</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//ClassPathXmlApplicationContext加载配置后会自动刷新上下文</span>
<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//pom文件的&lt;build&gt;元素中配置将xml资源打包，那么如下初始化ClassPathXmlApplicationContext的方式也是可以的</span>
<span class="token comment">/**
        &lt;resources&gt;
            &lt;resource&gt;
                &lt;directory&gt;${basedir}/src/main/java&lt;/directory&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/</span><span class="token operator">*</span><span class="token punctuation">.</span>xml<span class="token operator">&lt;</span><span class="token operator">/</span>include<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>includes<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>resource<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>resources<span class="token operator">&gt;</span>
<span class="token operator">*</span><span class="token operator">/</span>
<span class="token comment">//ApplicationContext context = new ClassPathXmlApplicationContext(&quot;com/hymanting/geekjavatrain/spring/container/applicationContext.xml&quot;);</span>
<span class="token class-name">Grade</span> grade <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Grade</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;年级：&quot;</span> <span class="token operator">+</span> grade<span class="token punctuation">.</span><span class="token function">getNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>组合基于xml的配置元数据。
bean定义可能横跨多个xml文件。通常每个独立的xml文件代表架构中的一个逻辑层或模块。可以使用<code>ClassPathXmlApplicationContext</code>传入多个配置文件，或者在xml配置文件
中使用<code>&lt;import resource=&quot;xx.xml&quot;&gt;</code>来组合多个xml配置。</li></ul> <h4 id="_3-使用容器"><a href="#_3-使用容器" class="header-anchor">#</a> 3. 使用容器</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;com/hymanting/geekjavatrain/spring/container/applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Grade</span> grade <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Grade</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;年级：&quot;</span> <span class="token operator">+</span> grade<span class="token punctuation">.</span><span class="token function">getNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Task是接口，getBean方法第一个参数可以指定bean名称</span>
<span class="token class-name">Task</span> task <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;teacherTask&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Task</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
task<span class="token punctuation">.</span><span class="token function">doTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>尽管可以像上面使用容器，但是这样我们的代码就和Spring API耦合，按照控制反转原则，应该是框架调用你，而不是你调用框架。
Spring与web框架集成为不同的web框架组件诸如控制器和JSF托管的beans提供了依赖注入的方式，让你可以通过元数据的方式声明对特定bean的依赖（比如autowire注解）。</p> <h3 id="beanfactory"><a href="#beanfactory" class="header-anchor">#</a> BeanFactory</h3> <p>该接口提供了能管理任何类型对象的高级配置机制。提供配置框架和基础功能。</p> <h3 id="applicationcontext"><a href="#applicationcontext" class="header-anchor">#</a> ApplicationContext</h3> <p><code>BeanFactory</code>的子接口，提供</p> <ul><li>更简单的集成Spring AOP特性</li> <li>消息资源处理（用在国际化中）</li> <li>事件发布</li> <li>应用层特定的上下文诸如用在web应用中的<code>WebApplicationContext</code>
Application是BeanFactory的超集，它提供了更多的企业级功能。
ApplicationContext表示Spring IoC容器，它通过读取配置元数据来来负责bean的实例化，配置和装配。配置元数据可以XML，Java注解或Java代码表示。配置元数据用来描述对象，及对象间的
依赖关系。</li></ul> <h4 id="spring中applicationcontext的实现类或子接口"><a href="#spring中applicationcontext的实现类或子接口" class="header-anchor">#</a> Spring中ApplicationContext的实现类或子接口</h4> <ul><li>独立XML应用上下文<code>org.springframework.context.support.ClassPathXmlApplicationContext</code> <ul><li>普通路径解析为包含包路径的类路径资源名称</li></ul></li> <li>独立XML应用上下文<code>org.springframework.context.support.FileSystemXmlApplicationContext</code> <ul><li>普通路径被解析为相对于当前VM(java.exe)的相对路径</li> <li>普通路径前加上file:前缀来强制使用绝对文件路径</li></ul></li> <li>Web应用提供配置的接口<code>org.springframework.web.context.ApplicationContext</code></li></ul> <h3 id="bean"><a href="#bean" class="header-anchor">#</a> Bean</h3> <p>Spring中构成应用主干且由Spring IoC容器管理的对象称为Bean。Bean由Spring IoC容器实例化，装配和管理。除此之外，bean和应用中其他对象没有区别。
bean和bean之间的依赖反映在Spring IoC容器使用的配置元数据中。</p> <h4 id="bean定义"><a href="#bean定义" class="header-anchor">#</a> Bean定义</h4> <p>容器内部，Bean定义是由BeanDefinition对象表示的。包含（不限于）如下元数据信息:</p> <ul><li>包限定的类名：定义的bean的实际实现类</li> <li>bean行为配置元素：阐述了容器内bean的行为(Bean的作用域，生命周期回调等等)。</li> <li>bean运作所需引用的其他bean：这些引用也称为协作者或依赖。</li> <li>新创建对象要设置的其他配置项：比如池的大小限制或管理池的bean使用的连接数。
这些元数据表示为组成bean定义的一系列属性：Class,Name,Scope,Constructor arguments, Properties, Autowiring mode, Lazy initialization mode, Initialization method, Destruction method.
除了bean定义里包含了创建特定bean的信息，ApplicationContext的实现也支持注册在容器外创建的对象，通过调用ApplicationContext的实现类的getBeanFactory()方法，该方法返回BeanFactory的DefaultListableBeanFactory实现。
DefaultListableBeanFactory支持通过registerSingleton和registerBeanDefinition方法注册bean。通常，应用程序只需要使用通过正常bean定义元数据定义的bean。</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">GenericApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">XmlBeanDefinitionReader</span> xmlReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">&quot;com/hymanting/geekjavatrain/spring/container/applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ctx.getBeanFactory().registerSingleton(&quot;student&quot;, new Student());</span>
<span class="token class-name">DefaultListableBeanFactory</span> defaultListableBeanFactory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">)</span> ctx<span class="token punctuation">.</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
defaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionBuilder</span><span class="token punctuation">.</span><span class="token function">genericBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setScope</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableBeanFactory</span><span class="token punctuation">.</span>SCOPE_PROTOTYPE<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Student</span> student1 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
student1<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Student</span> student2 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student1 <span class="token operator">==</span> student2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Bean元数据和手动提供的单例实例需要尽早注册，以便容器在自动装配和其他自省步骤中正确地推断它们。尽管某种程度上支持覆盖现有元数据和现有单实例，
但运行期对新bean注册（同时实时访问bean factory）不受正式支持并且可能导致并发访问异常，bean容器的状态不一致。或二者都有。</p> <h5 id="为bean命名"><a href="#为bean命名" class="header-anchor">#</a> 为bean命名</h5> <p>每个bean有一个或多个标识符。这些标识符在包含这些bean的容器中必须是唯一的。Bean通常只有一个标识符。如果需要1个以上的标识符，其他标识符可被认为是bean的别名。
基于XML的配置元数据中，可使用id属性或name属性或一起使用来指定bean标识符。id只能指定一个，name属性用来为bean指定别名，可以指定为多个用逗号、分号或空格隔开的字符串，
bean id由容器约束其唯一性。</p> <p>并不是必须给bean提供name或id。如果不显式提供，容器会为这个bean产生一个唯一的name.但如果你要通过使用ref元素或使用服务定位器风格的查找根据名称来引用bean，那必须提供name。
不提供bean名称的场景是使用内部bean或自动装配依赖。</p> <ul><li>Bean命名惯例
采用标准的Java实例字段命名惯例。bean名称是以小写字母开头的驼峰式，如accountManager。命名一致使配置更容易阅读和理解。如果使用了Spring AOP,将增强用到一组名称关联的bean上时将非常有用。</li></ul> <p>在类路径上扫描组件时，Spring按照bean命名惯例为未命名组件生成bean名称。本质上是取简单的类名，并将首个字符转换为小写。然而在（不常见的）特殊情况下，多于一个字符且第1，2个字符都是大写时，
则原先的命名被保留。Spring在这里使用了和<code>java.beans.Introspector.decapitalize</code>方法中定义的相同规则。</p> <ul><li>bean定义外给bean起别名
bean定义内部使用name属性给bean起别名。在bean实际定义的地方指定好bean所有别名并不总是足够的。有时需要为定义在别处的bean引入一个别名。
如子系统A的配置元数据通过systemA-dataSource名称来引用数据源，子系统B通过systemB-dataSource名称来引用数据源，当使用了这些子系统组成main应用时，main应用程序使用myApp-dataSource名称引用数据源。要
使3个名称指向相同对象，可以向配置也元数据中添加如下别名定义</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alias</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myApp-dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>systemA-dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alias</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myApp-dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>systemB-dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>如果使用java配置元数据，@Bean注解可以用来提供别名。如下给出别名使用示例。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- applicationContext.xml --&gt;</span>
<span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--traditional declaration--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>studentTask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>studentTask2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.StudentTask<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- applicationContext1.xml --&gt;</span>

<span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--traditional declaration--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>applicationContext.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alias</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>studentTask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taskOfStudent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ApplicationContext</span> context1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;com/hymanting/geekjavatrain/spring/container/applicationContext1.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//使用别名获取studentTask bean</span>
<span class="token class-name">Task</span> taskOfStudent <span class="token operator">=</span> context1<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;taskOfStudent&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Task</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
taskOfStudent<span class="token punctuation">.</span><span class="token function">doTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="实例化bean"><a href="#实例化bean" class="header-anchor">#</a> 实例化Bean</h5> <p>bean定义实质上是创建一个或多个对象的配方。当从容器获取一个bean时，容器会查看该bean的配方，并使用bean定义的配置元数据来创建（或获取）一个实际的对象。</p> <ul><li><p><bean></bean>元素的class属性</p> <ul><li>class属性的值并不总是待创建bean对象的类型</li> <li>使用Class属性的两种方式
<ul><li>通常，指定要构造的bean类，容器本身通过反射调用bean的构造函数直接创建bean对象，有点类似于java的new操作
<code>&lt;bean id=&quot;grade&quot; class=&quot;com.hymanting.geekjavatrain.spring.container.Grade&quot;&gt;&lt;/bean&gt;</code></li> <li>在不常见的情况下，指定创建bean对象的工厂方法所在的类，容器调用该类的静态工厂方法创建bean。调用静态工厂方法返回的对象类型可能是相同的类或完全是另一个类。
<code>&lt;bean id=&quot;gradefromFactory&quot; class=&quot;com.hymanting.geekjavatrain.spring.container.GradeFactory&quot; factory-method=&quot;produceGrade&quot;&gt;&lt;/bean&gt;</code><div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GradeFactory</span> <span class="token punctuation">{</span>
      <span class="token comment">//注意这边工厂方法的写法public static</span>
      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Grade</span> <span class="token function">produceGrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Grade</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//test Bean class is a FactoryClass</span>
  <span class="token class-name">Grade</span> grade1 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;gradefromFactory&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Grade</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;年级:&quot;</span> <span class="token operator">+</span> grade1<span class="token punctuation">.</span><span class="token function">getNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li>嵌套类名
<ul><li>使用二进制名称如<code>&lt;bean id=&quot;teacherAssistant&quot; class=&quot;com.hymanting.geekjavatrain.spring.container.Teacher$Assistant&quot;&gt;&lt;/bean&gt;</code></li> <li>使用源名称如<code>&lt;bean id=&quot;teacherAssistant2&quot; class=&quot;com.hymanting.geekjavatrain.spring.container.Teacher.Assistant&quot;/&gt;</code></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Assistant</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;i can help!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//inner bean name</span>
    <span class="token class-name">Teacher</span><span class="token punctuation">.</span><span class="token class-name">Assistant</span> assistant1 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;teacherAssistant&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Teacher</span><span class="token punctuation">.</span><span class="token class-name">Assistant</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Teacher</span><span class="token punctuation">.</span><span class="token class-name">Assistant</span> assistant2 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;teacherAssistant&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Teacher</span><span class="token punctuation">.</span><span class="token class-name">Assistant</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    assistant1<span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    assistant2<span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>使用构造函数实例化bean
这种创建bean的方式，所有普通类都可被Spring使用且兼容。也就是说开发的类不需要实现特定接口或以特殊形式来编写。简单指定bean的class属性就足够了。需要注意，根据创建bean的IoC的不同类型，
你可能需要提供一个默认（空）构造函数。
Spring IoC容器几乎可以管理你想要它管理的任何类。它不限于管理真正的JavaBean。容器内部也可以定义更多奇特的非Bean风格的类。比如使用绝对不符合JavaBean规范的遗留连接池，Spring也可以管理它。</p></li> <li><p>使用静态工厂方法实例化bean
使用静态工厂方法方法定义bean时，使用class属性指定包含静态工厂方法的类，factory-method的属性指定为工厂方法本身。</p></li> <li><p>使用实例工厂方法实例化bean
调用容器中已有bean的非静态方法创建一个新的bean，bean定义忽略class属性，factory-bean属性指定当前容器(或父容器或祖先容器)中包含用于创建bean对象的实例方法的bean的名称
factory-method指定工厂方法本身的名称。</p> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>klass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.KClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>no<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacherFromKClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>klass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dispathATeacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KClass</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token class-name">KClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> no<span class="token punctuation">,</span> <span class="token class-name">Grade</span> grade<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">}</span>
  
      <span class="token class-name">Teacher</span> <span class="token function">dispathATeacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">Teacher</span> teacherForAclass <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;teacherFromKClass&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Teacher</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  teacherForAclass<span class="token punctuation">.</span><span class="token function">teach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>factory bean VS FactoryBean
spring文档中，factory bean指的是spring容器中配置的这样的bean：该bean通过实例或静态工厂方法来创建对象。而FactoryBean是指Spring特定的FactoryBean实现类</li></ul></li> <li><p>确定bean的运行时类型
确定bean运行时类型的难点在于bean的类型确定不能仅仅通过bean定义的class属性来确定。这个class属性只是初始类引用，它可能和声明的工厂方法结合使用。或者它是能导致
bean拥有不同运行时类型的<code>FactoryBean</code>。或者在使用实例工厂方法实例化bean时压根不设置class属性（反而使用指定的factory-bean属性来解析）。此外AOP代理可以使用基于接口
的代理包装bean实例，目标bean的实际类型的暴露程度有限（只暴露了其实现的接口）
推荐查找特定bean的实际运行时的方式是为特定的bean名称调用<code>BeanFactory.getType</code>方法。它综合考虑了上面列举的几种情况，且返回的对象类型与为相同bean名称调用<code>BeanFactory.getBean</code>
返回的对象类型一样。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> beanTypeStr <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">&quot;teacherAssistant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>beanTypeStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="依赖"><a href="#依赖" class="header-anchor">#</a> 依赖</h3> <p>想象下，典型的企业应用不可能只由一个对象（或Spring用语bean）构成。那么构成完整应用的互相协作的对象，我们如何定义它们的依赖关系？</p> <h4 id="依赖注入"><a href="#依赖注入" class="header-anchor">#</a> 依赖注入</h4> <ul><li>依赖注入过程
首先对象只通过有限的几个入口定义它们的依赖，这些入口是构造器参数，工厂方法参数，或者从构造器或工厂方法返回对象实例后的实例属性。当容器创建bean时，将注入这些依赖。</li> <li>本质是IoC
依赖注入过程本质上和bean自身独立使用类的直接构造来控制依赖类的实例化或通过服务器定位模式查找依赖的过程是相反的。</li> <li>依赖倒置优点
代码更简洁。解耦更有效。测试更容易。</li></ul> <p>依赖注入存在2种主要形式，下面DI指代依赖注入</p> <h5 id="基于构造器的依赖注入"><a href="#基于构造器的依赖注入" class="header-anchor">#</a> 基于构造器的依赖注入</h5> <ul><li>基于构造器的DI是由容器调用具有多个参数的构造函数完成的，每个参数代表了一个依赖。</li> <li>示例<div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>klass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.KClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>no<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacher<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>klass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token punctuation">{</span>
  
    <span class="token keyword">private</span> <span class="token class-name">KClass</span> kClass<span class="token punctuation">;</span>
  
    <span class="token keyword">public</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token class-name">KClass</span> kClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>kClass <span class="token operator">=</span> kClass<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">teach</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;teacher teach!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">GenericApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">XmlBeanDefinitionReader</span> xmlReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
    xmlReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">&quot;com/hymanting/geekjavatrain/spring/container/applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Teacher</span> teacher1 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;teacher&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Teacher</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    teacher1<span class="token punctuation">.</span><span class="token function">teach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div></li> <li>构造器参数解析
构造器参数解析匹配通过参数类型实现。bean定义中的构造器参数若不存在潜在的歧义，那么bean定义中构造器的参数定义的顺序就是Bean实例化时提供给相应构造函器的顺序。
<ul><li>如下Teacher构造函数对KClass和Grade依赖通过bean定义中的constructor-arg元素声明。
<ul><li>KClass和Grade不存在继承关系，没有歧义产生，因此不要声明参数的类型或在参数列表中的顺序。</li> <li>本例中2个constructor-arg不存在顺序先后。</li></ul></li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacher<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>klass<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token class-name">KClass</span> kClass<span class="token punctuation">,</span> <span class="token class-name">Grade</span> grade<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>kClass <span class="token operator">=</span> kClass<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grade <span class="token operator">=</span> grade<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>构造器参数匹配方式
<ul><li><ol><li>使用type指定简单类型的实际类型，不过这个不能区分相同类型（用在没有相同简单类型的参数）
如下场景，构造器参数类型不同，bean定义中可以使用type来指定参数类型，如果不使用type，那么只能按序匹配。</li></ol></li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacher3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.String<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--匹配experience --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--匹配age --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> experience<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>experience <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>experience<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li><ol start="2"><li>使用index来指定参数的顺序 index从0计算
如下场景，构造函数参数类型相同，bean定义中可以使用index来指定参数顺序，如果不使用index，那么只能按序匹配。</li></ol> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token keyword">int</span> experience<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>experience <span class="token operator">=</span> experience<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacher2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--匹配experience --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--匹配age --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><ol start="3"><li>使用name属性，若编译不开启调试标记则类构造器需要@ConstructorProperties注解
对于构造参数值出现的二义性，也可以通过name属性。</li></ol></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@ConstructorProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;experience&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> experience<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>experience <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>experience<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacherUseNameAttr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>experience<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ul> <h5 id="基于setter的注入"><a href="#基于setter的注入" class="header-anchor">#</a> 基于Setter的注入</h5> <p>基于Setter的注入时容器在调用无参构造函数或无参静态工厂方法实例化bean后在bean上调用setter方法完成的。</p> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacherSetterBasedDI<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>KClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>klass<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">private</span> <span class="token class-name">KClass</span> kClass<span class="token punctuation">;</span>
  
  <span class="token keyword">private</span> <span class="token class-name">Grade</span> grade<span class="token punctuation">;</span>
  
  <span class="token keyword">public</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setKClass</span><span class="token punctuation">(</span><span class="token class-name">KClass</span> kClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>kClass <span class="token operator">=</span> kClass<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setGrade</span><span class="token punctuation">(</span><span class="token class-name">Grade</span> grade<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grade <span class="token operator">=</span> grade<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h5 id="混用基于构造器的di和基于setter的di"><a href="#混用基于构造器的di和基于setter的di" class="header-anchor">#</a> 混用基于构造器的DI和基于Setter的DI</h5> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">private</span> <span class="token class-name">KClass</span> kClass<span class="token punctuation">;</span>
  
  <span class="token keyword">private</span> <span class="token class-name">Grade</span> grade<span class="token punctuation">;</span>
  
  <span class="token keyword">public</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token class-name">Grade</span> grade<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>grade <span class="token operator">=</span> grade<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setKClass</span><span class="token punctuation">(</span><span class="token class-name">KClass</span> kClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>kClass <span class="token operator">=</span> kClass<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacherMixedDI<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hymanting.geekjavatrain.spring.container.Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grade<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>KClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>klass<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="选择哪种依赖注入风格"><a href="#选择哪种依赖注入风格" class="header-anchor">#</a> 选择哪种依赖注入风格</h5> <ul><li>对于强制性依赖项，建议使用基于构造器注入的方式</li> <li>对于可选依赖项，可以使用基于Setter的注入方式</li></ul> <h5 id="依赖解析流程"><a href="#依赖解析流程" class="header-anchor">#</a> 依赖解析流程</h5> <h5 id="依赖注入示例"><a href="#依赖注入示例" class="header-anchor">#</a> 依赖注入示例</h5> <h4 id="依赖和配置细节"><a href="#依赖和配置细节" class="header-anchor">#</a> 依赖和配置细节</h4> <h5 id="字面值-基础类型-字符窜等等"><a href="#字面值-基础类型-字符窜等等" class="header-anchor">#</a> 字面值(基础类型，字符窜等等)</h5> <h5 id="引用其它bean-依赖"><a href="#引用其它bean-依赖" class="header-anchor">#</a> 引用其它bean(依赖)</h5> <h5 id="内部bean"><a href="#内部bean" class="header-anchor">#</a> 内部bean</h5> <h5 id="集合"><a href="#集合" class="header-anchor">#</a> 集合</h5> <h5 id="null和空字符串值"><a href="#null和空字符串值" class="header-anchor">#</a> Null和空字符串值</h5> <h5 id="xml-p-namespace"><a href="#xml-p-namespace" class="header-anchor">#</a> XML p-namespace</h5> <h5 id="xml-c-namespace"><a href="#xml-c-namespace" class="header-anchor">#</a> XML c-namespace</h5> <h5 id="复合属性名称"><a href="#复合属性名称" class="header-anchor">#</a> 复合属性名称</h5> <h4 id="使用depends-on"><a href="#使用depends-on" class="header-anchor">#</a> 使用depends-on</h4> <h4 id="延迟初始化的bean"><a href="#延迟初始化的bean" class="header-anchor">#</a> 延迟初始化的bean</h4> <h4 id="自动装配依赖"><a href="#自动装配依赖" class="header-anchor">#</a> 自动装配依赖</h4> <h5 id="自动装配的限制和缺点"><a href="#自动装配的限制和缺点" class="header-anchor">#</a> 自动装配的限制和缺点</h5> <h5 id="从自动装配中排除bean"><a href="#从自动装配中排除bean" class="header-anchor">#</a> 从自动装配中排除bean</h5> <h4 id="方法注入"><a href="#方法注入" class="header-anchor">#</a> 方法注入</h4> <h5 id="查找方法注入"><a href="#查找方法注入" class="header-anchor">#</a> 查找方法注入</h5> <h5 id="任意方法替换"><a href="#任意方法替换" class="header-anchor">#</a> 任意方法替换</h5> <h2 id="spring-aop"><a href="#spring-aop" class="header-anchor">#</a> Spring AOP</h2> <p>AOP(Aspect Oriented Programming)面向切面编程</p> <ul><li>作为OOP(Object-oriented Programming)面向对象编程的补充，提供了对编程结构的另一种思考方式。</li> <li>OOP中模块的主要单元是类，AOP中模块的主要单元是切面。
AOP框架是Spring中的一个关键组件</li></ul> <h3 id="术语"><a href="#术语" class="header-anchor">#</a> 术语</h3> <h4 id="切面"><a href="#切面" class="header-anchor">#</a> 切面</h4> <p>切面使得关注点可以模块化</p> <h4 id="关注点"><a href="#关注点" class="header-anchor">#</a> 关注点</h4> <p>跨多个类型和对象的逻辑，Spring称为横切关注点，如事务管理。</p> <h4 id="spring-aop探险"><a href="#spring-aop探险" class="header-anchor">#</a> Spring AOP探险</h4> <p>记录一次尝试使用Spring AOP来切fastjson方法的案例。
结果：失败
原因：对Spring AOP基本原理没掌握。
需求背景：fastjson出现漏洞，框架决定用jackson替换fastjson，但之前一次替换由于没有充分考虑技术风险，及涉及面广，测试不充分等原因，导致线上回滚，这次再来花时间研究下，由于fastjson用在多个项目中，
如果每个项目都要改造的话，工作量还是很大的。此时想到了无侵入解决问题的常用方法：AOP。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//HymanTest类模拟FastJson的toJsonString静态方法</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HymanTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adad&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//Spring AOP @AspectJ风格</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FastJsonAspect</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> LOGGER <span class="token operator">=</span> <span class="token class-name">LogManager</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">FastJsonAspect</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* HymanTest.execute(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAccessCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before execute&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">FastJsonClient</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">HymanTest</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码期望输出before execute adad。实际只输出了adad。经分析原因是Spring AOP不支持切静态方法。可以使用AspectJ来支持。这个需要从Spring AOP的原理来分析，Spring实现AOP通过2种方式，
一种是使用原生的Java动态代理，另外一种是使用CGLib。Java动态代理可为实现了接口的类提供代理。而CGLIB通过为类生成动态的子类实现。由于使用AspectJ稍微复杂，需要额外配置且需要在jar启动时
添加-javaagent。</p></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.198c1c7f.js" defer></script><script src="/assets/js/3.e89c7bc2.js" defer></script><script src="/assets/js/1.f801d562.js" defer></script><script src="/assets/js/19.1aebbbde.js" defer></script>
  </body>
</html>
